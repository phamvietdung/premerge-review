"use strict";(()=>{var se,w,Fe,st,Y,Ce,Ie,Me,Ee,ve,fe,ge,lt,Q={},Te=[],ct=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,le=Array.isArray;function j(e,t){for(var o in t)e[o]=t[o];return e}function me(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function dt(e,t,o){var r,a,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?a=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?se.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return ne(e,s,r,a,null)}function ne(e,t,o,r,a){var i={type:e,props:t,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++Fe,__i:-1,__u:0};return a==null&&w.vnode!=null&&w.vnode(i),i}function $(e){return e.children}function ie(e,t){this.props=e,this.context=t}function Z(e,t){if(t==null)return e.__?Z(e.__,e.__i+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?Z(e):null}function Le(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return Le(e)}}function Se(e){(!e.__d&&(e.__d=!0)&&Y.push(e)&&!ae.__r++||Ce!=w.debounceRendering)&&((Ce=w.debounceRendering)||Ie)(ae)}function ae(){for(var e,t,o,r,a,i,s,c=1;Y.length;)Y.length>c&&Y.sort(Me),e=Y.shift(),c=Y.length,e.__d&&(o=void 0,a=(r=(t=e).__v).__e,i=[],s=[],t.__P&&((o=j({},r)).__v=r.__v+1,w.vnode&&w.vnode(o),he(t.__P,o,r,t.__n,t.__P.namespaceURI,32&r.__u?[a]:null,i,a??Z(r),!!(32&r.__u),s),o.__v=r.__v,o.__.__k[o.__i]=o,Ae(i,o,s),o.__e!=a&&Le(o)));ae.__r=0}function Pe(e,t,o,r,a,i,s,c,u,d,g){var n,_,p,C,E,k,h=r&&r.__k||Te,v=t.length;for(u=ut(o,t,h,u,v),n=0;n<v;n++)(p=o.__k[n])!=null&&(_=p.__i==-1?Q:h[p.__i]||Q,p.__i=n,k=he(e,p,_,a,i,s,c,u,d,g),C=p.__e,p.ref&&_.ref!=p.ref&&(_.ref&&ye(_.ref,null,p),g.push(p.ref,p.__c||C,p)),E==null&&C!=null&&(E=C),4&p.__u||_.__k===p.__k?u=We(p,u,e):typeof p.type=="function"&&k!==void 0?u=k:C&&(u=C.nextSibling),p.__u&=-7);return o.__e=E,u}function ut(e,t,o,r,a){var i,s,c,u,d,g=o.length,n=g,_=0;for(e.__k=new Array(a),i=0;i<a;i++)(s=t[i])!=null&&typeof s!="boolean"&&typeof s!="function"?(u=i+_,(s=e.__k[i]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?ne(null,s,null,null,null):le(s)?ne($,{children:s},null,null,null):s.constructor==null&&s.__b>0?ne(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,c=null,(d=s.__i=_t(s,o,u,n))!=-1&&(n--,(c=o[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(a>g?_--:a<g&&_++),typeof s.type!="function"&&(s.__u|=4)):d!=u&&(d==u-1?_--:d==u+1?_++:(d>u?_--:_++,s.__u|=4))):e.__k[i]=null;if(n)for(i=0;i<g;i++)(c=o[i])!=null&&(2&c.__u)==0&&(c.__e==r&&(r=Z(c)),Ne(c,c));return r}function We(e,t,o){var r,a;if(typeof e.type=="function"){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=We(r[a],t,o));return t}e.__e!=t&&(t&&e.type&&!o.contains(t)&&(t=Z(e)),o.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function _t(e,t,o,r){var a,i,s=e.key,c=e.type,u=t[o];if(u===null&&e.key==null||u&&s==u.key&&c==u.type&&(2&u.__u)==0)return o;if(r>(u!=null&&(2&u.__u)==0?1:0))for(a=o-1,i=o+1;a>=0||i<t.length;){if(a>=0){if((u=t[a])&&(2&u.__u)==0&&s==u.key&&c==u.type)return a;a--}if(i<t.length){if((u=t[i])&&(2&u.__u)==0&&s==u.key&&c==u.type)return i;i++}}return-1}function Re(e,t,o){t[0]=="-"?e.setProperty(t,o??""):e[t]=o==null?"":typeof o!="number"||ct.test(t)?o:o+"px"}function re(e,t,o,r,a){var i,s;e:if(t=="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)o&&t in o||Re(e.style,t,"");if(o)for(t in o)r&&o[t]==r[t]||Re(e.style,t,o[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(Ee,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=o,o?r?o.u=r.u:(o.u=ve,e.addEventListener(t,i?ge:fe,i)):e.removeEventListener(t,i?ge:fe,i);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&o==1?"":o))}}function Be(e){return function(t){if(this.l){var o=this.l[t.type+e];if(t.t==null)t.t=ve++;else if(t.t<o.u)return;return o(w.event?w.event(t):t)}}}function he(e,t,o,r,a,i,s,c,u,d){var g,n,_,p,C,E,k,h,v,L,P,N,z,O,q,D,V,T=t.type;if(t.constructor!=null)return null;128&o.__u&&(u=!!(32&o.__u),i=[c=t.__e=o.__e]),(g=w.__b)&&g(t);e:if(typeof T=="function")try{if(h=t.props,v="prototype"in T&&T.prototype.render,L=(g=T.contextType)&&r[g.__c],P=g?L?L.props.value:g.__:r,o.__c?k=(n=t.__c=o.__c).__=n.__E:(v?t.__c=n=new T(h,P):(t.__c=n=new ie(h,P),n.constructor=T,n.render=ft),L&&L.sub(n),n.props=h,n.state||(n.state={}),n.context=P,n.__n=r,_=n.__d=!0,n.__h=[],n._sb=[]),v&&n.__s==null&&(n.__s=n.state),v&&T.getDerivedStateFromProps!=null&&(n.__s==n.state&&(n.__s=j({},n.__s)),j(n.__s,T.getDerivedStateFromProps(h,n.__s))),p=n.props,C=n.state,n.__v=t,_)v&&T.getDerivedStateFromProps==null&&n.componentWillMount!=null&&n.componentWillMount(),v&&n.componentDidMount!=null&&n.__h.push(n.componentDidMount);else{if(v&&T.getDerivedStateFromProps==null&&h!==p&&n.componentWillReceiveProps!=null&&n.componentWillReceiveProps(h,P),!n.__e&&n.shouldComponentUpdate!=null&&n.shouldComponentUpdate(h,n.__s,P)===!1||t.__v==o.__v){for(t.__v!=o.__v&&(n.props=h,n.state=n.__s,n.__d=!1),t.__e=o.__e,t.__k=o.__k,t.__k.some(function(f){f&&(f.__=t)}),N=0;N<n._sb.length;N++)n.__h.push(n._sb[N]);n._sb=[],n.__h.length&&s.push(n);break e}n.componentWillUpdate!=null&&n.componentWillUpdate(h,n.__s,P),v&&n.componentDidUpdate!=null&&n.__h.push(function(){n.componentDidUpdate(p,C,E)})}if(n.context=P,n.props=h,n.__P=e,n.__e=!1,z=w.__r,O=0,v){for(n.state=n.__s,n.__d=!1,z&&z(t),g=n.render(n.props,n.state,n.context),q=0;q<n._sb.length;q++)n.__h.push(n._sb[q]);n._sb=[]}else do n.__d=!1,z&&z(t),g=n.render(n.props,n.state,n.context),n.state=n.__s;while(n.__d&&++O<25);n.state=n.__s,n.getChildContext!=null&&(r=j(j({},r),n.getChildContext())),v&&!_&&n.getSnapshotBeforeUpdate!=null&&(E=n.getSnapshotBeforeUpdate(p,C)),D=g,g!=null&&g.type===$&&g.key==null&&(D=He(g.props.children)),c=Pe(e,le(D)?D:[D],t,o,r,a,i,s,c,u,d),n.base=t.__e,t.__u&=-161,n.__h.length&&s.push(n),k&&(n.__E=n.__=null)}catch(f){if(t.__v=null,u||i!=null)if(f.then){for(t.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,t.__e=c}else for(V=i.length;V--;)me(i[V]);else t.__e=o.__e,t.__k=o.__k;w.__e(f,t,o)}else i==null&&t.__v==o.__v?(t.__k=o.__k,t.__e=o.__e):c=t.__e=pt(o.__e,t,o,r,a,i,s,u,d);return(g=w.diffed)&&g(t),128&t.__u?void 0:c}function Ae(e,t,o){for(var r=0;r<o.length;r++)ye(o[r],o[++r],o[++r]);w.__c&&w.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){w.__e(i,a.__v)}})}function He(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:le(e)?e.map(He):j({},e)}function pt(e,t,o,r,a,i,s,c,u){var d,g,n,_,p,C,E,k=o.props,h=t.props,v=t.type;if(v=="svg"?a="http://www.w3.org/2000/svg":v=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(d=0;d<i.length;d++)if((p=i[d])&&"setAttribute"in p==!!v&&(v?p.localName==v:p.nodeType==3)){e=p,i[d]=null;break}}if(e==null){if(v==null)return document.createTextNode(h);e=document.createElementNS(a,v,h.is&&h),c&&(w.__m&&w.__m(t,i),c=!1),i=null}if(v==null)k===h||c&&e.data==h||(e.data=h);else{if(i=i&&se.call(e.childNodes),k=o.props||Q,!c&&i!=null)for(k={},d=0;d<e.attributes.length;d++)k[(p=e.attributes[d]).name]=p.value;for(d in k)if(p=k[d],d!="children"){if(d=="dangerouslySetInnerHTML")n=p;else if(!(d in h)){if(d=="value"&&"defaultValue"in h||d=="checked"&&"defaultChecked"in h)continue;re(e,d,null,p,a)}}for(d in h)p=h[d],d=="children"?_=p:d=="dangerouslySetInnerHTML"?g=p:d=="value"?C=p:d=="checked"?E=p:c&&typeof p!="function"||k[d]===p||re(e,d,p,k[d],a);if(g)c||n&&(g.__html==n.__html||g.__html==e.innerHTML)||(e.innerHTML=g.__html),t.__k=[];else if(n&&(e.innerHTML=""),Pe(t.type=="template"?e.content:e,le(_)?_:[_],t,o,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,s,i?i[0]:o.__k&&Z(o,0),c,u),i!=null)for(d=i.length;d--;)me(i[d]);c||(d="value",v=="progress"&&C==null?e.removeAttribute("value"):C!=null&&(C!==e[d]||v=="progress"&&!C||v=="option"&&C!=k[d])&&re(e,d,C,k[d],a),d="checked",E!=null&&E!=e[d]&&re(e,d,E,k[d],a))}return e}function ye(e,t,o){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(a){w.__e(a,o)}}function Ne(e,t,o){var r,a;if(w.unmount&&w.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||ye(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){w.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&Ne(r[a],t,o||typeof e.type!="function");o||me(e.__e),e.__c=e.__=e.__e=void 0}function ft(e,t,o){return this.constructor(e,o)}function ze(e,t,o){var r,a,i,s;t==document&&(t=document.documentElement),w.__&&w.__(e,t),a=(r=typeof o=="function")?null:o&&o.__k||t.__k,i=[],s=[],he(t,e=(!r&&o||t).__k=dt($,null,[e]),a||Q,Q,t.namespaceURI,!r&&o?[o]:a?null:t.firstChild?se.call(t.childNodes):null,i,!r&&o?o:a?a.__e:t.firstChild,r,s),Ae(i,e,s)}se=Te.slice,w={__e:function(e,t,o,r){for(var a,i,s;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,r||{}),s=a.__d),s)return a.__E=a}catch(c){e=c}throw e}},Fe=0,st=function(e){return e!=null&&e.constructor==null},ie.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=j({},this.state),typeof e=="function"&&(e=e(j({},o),this.props)),e&&j(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),Se(this))},ie.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Se(this))},ie.prototype.render=$,Y=[],Ie=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Me=function(e,t){return e.__v.__b-t.__v.__b},ae.__r=0,Ee=/(PointerCapture)$|Capture$/i,ve=0,fe=Be(!1),ge=Be(!0),lt=0;var X,F,be,Oe,ee=0,Je=[],I=w,De=I.__b,je=I.__r,Ue=I.diffed,$e=I.__c,Ge=I.unmount,qe=I.__;function we(e,t){I.__h&&I.__h(F,e,ee||t),ee=0;var o=F.__H||(F.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function b(e){return ee=1,gt(Ze,e)}function gt(e,t,o){var r=we(X++,2);if(r.t=e,!r.__c&&(r.__=[o?o(t):Ze(void 0,t),function(c){var u=r.__N?r.__N[0]:r.__[0],d=r.t(u,c);u!==d&&(r.__N=[d,r.__[1]],r.__c.setState({}))}],r.__c=F,!F.__f)){var a=function(c,u,d){if(!r.__c.__H)return!0;var g=r.__c.__H.__.filter(function(_){return!!_.__c});if(g.every(function(_){return!_.__N}))return!i||i.call(this,c,u,d);var n=r.__c.props!==c;return g.forEach(function(_){if(_.__N){var p=_.__[0];_.__=_.__N,_.__N=void 0,p!==_.__[0]&&(n=!0)}}),i&&i.call(this,c,u,d)||n};F.__f=!0;var i=F.shouldComponentUpdate,s=F.componentWillUpdate;F.componentWillUpdate=function(c,u,d){if(this.__e){var g=i;i=void 0,a(c,u,d),i=g}s&&s.call(this,c,u,d)},F.shouldComponentUpdate=a}return r.__N||r.__}function G(e,t){var o=we(X++,3);!I.__s&&Ye(o.__H,t)&&(o.__=e,o.u=t,F.__H.__h.push(o))}function de(e){return ee=5,Ke(function(){return{current:e}},[])}function Ke(e,t){var o=we(X++,7);return Ye(o.__H,t)&&(o.__=e(),o.__H=t,o.__h=e),o.__}function te(e,t){return ee=8,Ke(function(){return e},t)}function vt(){for(var e;e=Je.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ce),e.__H.__h.forEach(ke),e.__H.__h=[]}catch(t){e.__H.__h=[],I.__e(t,e.__v)}}I.__b=function(e){F=null,De&&De(e)},I.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),qe&&qe(e,t)},I.__r=function(e){je&&je(e),X=0;var t=(F=e.__c).__H;t&&(be===F?(t.__h=[],F.__h=[],t.__.forEach(function(o){o.__N&&(o.__=o.__N),o.u=o.__N=void 0})):(t.__h.forEach(ce),t.__h.forEach(ke),t.__h=[],X=0)),be=F},I.diffed=function(e){Ue&&Ue(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Je.push(t)!==1&&Oe===I.requestAnimationFrame||((Oe=I.requestAnimationFrame)||mt)(vt)),t.__H.__.forEach(function(o){o.u&&(o.__H=o.u),o.u=void 0})),be=F=null},I.__c=function(e,t){t.some(function(o){try{o.__h.forEach(ce),o.__h=o.__h.filter(function(r){return!r.__||ke(r)})}catch(r){t.some(function(a){a.__h&&(a.__h=[])}),t=[],I.__e(r,o.__v)}}),$e&&$e(e,t)},I.unmount=function(e){Ge&&Ge(e);var t,o=e.__c;o&&o.__H&&(o.__H.__.forEach(function(r){try{ce(r)}catch(a){t=a}}),o.__H=void 0,t&&I.__e(t,o.__v))};var Ve=typeof requestAnimationFrame=="function";function mt(e){var t,o=function(){clearTimeout(r),Ve&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(o,35);Ve&&(t=requestAnimationFrame(o))}function ce(e){var t=F,o=e.__c;typeof o=="function"&&(e.__c=void 0,o()),F=t}function ke(e){var t=F;e.__c=e.__(),F=t}function Ye(e,t){return!e||e.length!==t.length||t.some(function(o,r){return o!==e[r]})}function Ze(e,t){return typeof t=="function"?t(e):t}var ht=0,St=Array.isArray;function l(e,t,o,r,a,i){t||(t={});var s,c,u=t;if("ref"in u)for(c in u={},t)c=="ref"?s=t[c]:u[c]=t[c];var d={type:e,props:u,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ht,__i:-1,__u:0,__source:a,__self:i};if(typeof e=="function"&&(s=e.defaultProps))for(c in s)u[c]===void 0&&(u[c]=s[c]);return w.vnode&&w.vnode(d),d}function xe({vscode:e}){let[t,o]=b([]),[r,a]=b([]),[i,s]=b({}),[c,u]=b({}),[d,g]=b(!1),[n,_]=b({}),[p,C]=b({}),[E,k]=b(null),[h,v]=b(null),L=de({}),P=te(()=>{e&&(g(!0),e.postMessage({type:"requestWorkspaceFolders"}))},[e]);G(()=>{P();let f=R=>{let x=R.data;if(x.type==="workspaceFolders"){let S=x.data??{},M=Array.isArray(S.directories)?S.directories:[],A=Array.isArray(S.files)?S.files:[];o(M),a(A),g(!1),v(null);let J={...L.current};A.forEach(K=>{J[K.path]=K}),L.current=J}if(x.type==="workspaceFoldersError"&&(g(!1),v(x.error||"Unable to load workspace folders.")),x.type==="filesInFolder"){let S=x.folderPath,M=x.data??{},A=Array.isArray(M.directories)?M.directories:[],J=Array.isArray(M.files)?M.files:[];x.error?v(x.error):v(null),u(U=>({...U,[S]:{directories:A,files:J}}));let K={...L.current};J.forEach(U=>{K[U.path]=U}),L.current=K,_(U=>({...U,[S]:!1}))}if(x.type==="fileReviewSubmitted"){let S=x.filePath,M=L.current;S&&M[S]?k(`Opened file for review: ${M[S].relativePath}`):k(S?`Opened file for review: ${S}`:"Opened file for review.")}x.type==="fileReviewError"&&(k(null),v(x.error||"Unable to open the selected file."))};return window.addEventListener("message",f),()=>window.removeEventListener("message",f)},[P]);let N=te(f=>{let R=!!i[f.path];s(x=>({...x,[f.path]:!R})),!R&&!c[f.path]&&(_(x=>({...x,[f.path]:!0})),e&&e.postMessage({type:"requestFilesInFolder",folderPath:f.path}))},[i,c,e]),z=te(f=>{C(R=>({...R,[f]:!R[f]})),k(null)},[]),O=te(()=>{let f=Object.keys(p).filter(R=>p[R]);if(f.length===0){k("Please choose one or more files before submitting.");return}k("Submitting selected files for review..."),v(null),e&&e.postMessage({type:"submitFilesReview",filePaths:f})},[p,e]),q=["cs","ts","tsx","js","php","java"],D=f=>{let R=f.name.split(".");if(R.length===1)return!1;let x=R[R.length-1].toLowerCase();return q.includes(x)},V=f=>{if(!D(f))return null;let R=!!p[f.path];return l("li",{style:{marginBottom:"0.4rem"},children:l("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[l("input",{type:"checkbox",name:"file-review-selection",value:f.path,checked:R,onChange:()=>z(f.path)}),l("span",{children:f.relativePath})]})},f.path)},T=(f,R=0)=>{let x=!!i[f.path],S=c[f.path],M=R*16;return l("li",{style:{marginBottom:"0.75rem"},children:[l("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",paddingLeft:M},children:[l("button",{style:{border:"none",background:"transparent",color:"var(--vscode-foreground)",cursor:"pointer",fontSize:"0.9rem",padding:0,width:"2rem",textAlign:"left"},onClick:()=>N(f),"aria-label":x?"Collapse folder":"Expand folder","aria-expanded":x,children:x?"\u25BE":"\u25B8"}),l("span",{style:{fontWeight:600},children:f.relativePath||f.name})]}),x&&l("div",{style:{marginLeft:M+16,marginTop:"0.5rem"},children:[n[f.path]&&l("div",{children:"Loading files..."}),!n[f.path]&&S&&S.directories.length===0&&S.files.length===0&&l("div",{children:"No entries found in this folder."}),!n[f.path]&&S&&S.directories.length>0&&l("ul",{style:{listStyle:"none",paddingLeft:0},children:S.directories.map(A=>T(A,R+1))}),!n[f.path]&&S&&S.files.length>0&&l("ul",{style:{listStyle:"none",paddingLeft:0},children:S.files.map(A=>V(A))})]})]},f.path)};return l("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[l("div",{children:[l("h3",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"File Review"}),l("p",{style:{margin:0,color:"var(--vscode-descriptionForeground)"},children:"Browse folders, choose the file you want to review, then submit to open it."})]}),h&&l("div",{style:{background:"#ff000022",color:"#ff6666",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ff6666"},children:h}),r.length>0&&l("div",{children:[l("h4",{style:{margin:"0 0 0.5rem 0"},children:"Workspace root files"}),l("ul",{style:{listStyle:"none",paddingLeft:0,margin:0},children:r.map(f=>V(f))})]}),l("div",{children:[d&&l("div",{children:"Loading workspace folders..."}),!d&&t.length===0&&l("div",{children:"No folders found in the current workspace."}),!d&&t.length>0&&l("ul",{style:{listStyle:"none",paddingLeft:0,margin:0},children:t.map(f=>T(f,0))})]}),l("button",{style:{alignSelf:"flex-start",padding:"0.6rem 1.2rem",fontSize:"0.95rem",borderRadius:"4px",border:"none",cursor:Object.keys(p).some(f=>p[f])?"pointer":"not-allowed",background:Object.keys(p).some(f=>p[f])?"#22c55e":"#3a3a3a",color:Object.keys(p).some(f=>p[f])?"#fff":"#888"},onClick:O,disabled:!Object.keys(p).some(f=>p[f]),children:"Submit for review"}),E&&l("div",{style:{fontSize:"0.9rem",color:"var(--vscode-descriptionForeground)"},children:E})]})}var H=acquireVsCodeApi();function ue({options:e,value:t,onChange:o,placeholder:r="Select..."}){let[a,i]=b(!1),[s,c]=b(""),[u,d]=b(e),g=de(null);G(()=>{let _=e.filter(p=>p.toLowerCase().includes(s.toLowerCase()));d(_)},[s,e]),G(()=>{function _(p){let C=g.current;C&&C.contains&&!C.contains(p.target)&&(i(!1),c(""))}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);let n=_=>{o(_),i(!1),c("")};return l("div",{style:m.selectContainer,ref:g,children:[l("div",{style:m.selectDisplay,onClick:()=>i(!a),children:[l("span",{children:t||r}),l("span",{style:m.arrow,children:a?"\u25B2":"\u25BC"})]}),a&&l("div",{style:m.dropdown,children:[l("input",{style:m.searchInput,type:"text",placeholder:"Search...",value:s,onChange:_=>c(_.target.value),autoFocus:!0}),l("div",{style:m.optionsList,children:u.length>0?u.map((_,p)=>l("div",{style:{...m.option,...t===_?m.selectedOption:{}},onClick:()=>n(_),children:_},p)):l("div",{style:m.noOptions,children:"No options found"})})]})]})}var m={container:{padding:"1rem",fontFamily:"var(--vscode-font-family)",color:"var(--vscode-foreground)",backgroundColor:"var(--vscode-editor-background)",height:"100%"},heading:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",color:"var(--vscode-foreground)"},label:{fontSize:"0.85rem",marginBottom:"0.25rem",display:"block",color:"var(--vscode-foreground)"},select:{width:"100%",padding:"0.5rem",fontSize:"0.9rem",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",border:"1px solid var(--vscode-input-border)",borderRadius:"4px"},selectContainer:{position:"relative",width:"100%"},selectDisplay:{width:"100%",padding:"0.5rem",fontSize:"0.9rem",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",border:"1px solid var(--vscode-input-border)",borderRadius:"4px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box"},arrow:{fontSize:"0.8rem",color:"var(--vscode-descriptionForeground)"},dropdown:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"var(--vscode-dropdown-background)",border:"1px solid var(--vscode-dropdown-border)",borderTop:"none",borderRadius:"0 0 4px 4px",zIndex:1e3,maxHeight:"200px",overflow:"hidden"},searchInput:{width:"100%",padding:"0.5rem",fontSize:"0.9rem",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",border:"none",borderBottom:"1px solid var(--vscode-input-border)",outline:"none",boxSizing:"border-box"},optionsList:{maxHeight:"150px",overflowY:"auto"},option:{padding:"0.5rem",cursor:"pointer",borderBottom:"1px solid var(--vscode-widget-border)",color:"var(--vscode-foreground)"},selectedOption:{backgroundColor:"var(--vscode-list-activeSelectionBackground)",color:"var(--vscode-list-activeSelectionForeground)"},noOptions:{padding:"0.5rem",color:"var(--vscode-descriptionForeground)",textAlign:"center"},button:{marginTop:"1.5rem",width:"100%",padding:"0.6rem",fontSize:"0.95rem",backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",borderRadius:"4px",cursor:"pointer"},loading:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px",fontSize:"0.9rem",color:"var(--vscode-descriptionForeground)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},refreshButton:{backgroundColor:"var(--vscode-button-secondaryBackground)",color:"var(--vscode-button-secondaryForeground)",border:"1px solid var(--vscode-button-border)",borderRadius:"4px",padding:"0.5rem",cursor:"pointer",fontSize:"0.9rem"},warning:{backgroundColor:"var(--vscode-editorWarning-background)",color:"var(--vscode-editorWarning-foreground)",padding:"0.5rem",borderRadius:"4px",fontSize:"0.85rem",marginBottom:"1rem",textAlign:"center",border:"1px solid var(--vscode-editorWarning-border)"},commitSection:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"var(--vscode-editorWidget-background)",borderRadius:"4px",border:"1px solid var(--vscode-widget-border, var(--vscode-contrastBorder, #444))"},loadingText:{color:"var(--vscode-descriptionForeground)",fontSize:"0.8rem",fontStyle:"italic"},commitCount:{color:"var(--vscode-textLink-foreground)",fontSize:"0.8rem"},selectedCommit:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"var(--vscode-list-activeSelectionBackground)",color:"var(--vscode-list-activeSelectionForeground)",borderRadius:"4px",fontSize:"0.85rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid var(--vscode-contrastActiveBorder, var(--vscode-list-activeSelectionBackground))"},clearButton:{backgroundColor:"var(--vscode-button-secondaryBackground)",color:"var(--vscode-button-secondaryForeground)",border:"1px solid var(--vscode-button-border)",borderRadius:"3px",padding:"0.25rem 0.5rem",fontSize:"0.8rem",cursor:"pointer"},intelligentRoutingInfo:{backgroundColor:"var(--vscode-editorInfo-background)",color:"var(--vscode-editorInfo-foreground)",padding:"0.5rem",borderRadius:"4px",fontSize:"0.65rem",marginBottom:"0.5rem",border:"1px solid var(--vscode-editorInfo-border, var(--vscode-editorInfo-foreground, #22c55e))",display:"flex",alignItems:"flex-start",gap:"0.5rem"},intelligentRoutingWarning:{backgroundColor:"var(--vscode-editorWarning-background)",color:"var(--vscode-editorWarning-foreground)",padding:"0.5rem",borderRadius:"4px",fontSize:"0.65rem",marginBottom:"0.5rem",border:"1px solid var(--vscode-editorWarning-border, var(--vscode-contrastBorder, #f59e0b))",display:"flex",alignItems:"flex-start",gap:"0.5rem"},reviewSection:{position:"absolute",width:"100%",bottom:"0",left:"0",backgroundColor:"var(--vscode-editorWidget-background)",borderTop:"1px solid var(--vscode-widget-border)",padding:"0.75rem",boxSizing:"border-box"},reviewSectionTitle:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:"0.75rem",color:"var(--vscode-foreground)",display:"flex",alignItems:"center",gap:"0.5rem"},reviewStatus:{fontSize:"0.8rem",marginBottom:"1rem",padding:"0.5rem",borderRadius:"4px",backgroundColor:"var(--vscode-editorInfo-background)",color:"var(--vscode-editorInfo-foreground)",border:"1px solid var(--vscode-editorInfo-border)"},noReviewStatus:{fontSize:"0.8rem",marginBottom:"1rem",padding:"0.5rem",borderRadius:"4px",backgroundColor:"var(--vscode-editorError-background)",color:"var(--vscode-editorError-foreground)",border:"1px solid var(--vscode-editorError-border)"},reviewActions:{display:"flex",flexDirection:"row",gap:"0.5rem",justifyContent:"space-between"},actionButton:{padding:"0.6rem 0.75rem",fontSize:"0.85rem",fontWeight:"500",borderRadius:"4px",border:"none",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",flex:1,minHeight:"40px"},primaryButton:{backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)"},secondaryButton:{backgroundColor:"var(--vscode-button-secondaryBackground)",color:"var(--vscode-button-secondaryForeground)"},successButton:{backgroundColor:"var(--vscode-testing-iconPassed)",color:"var(--vscode-button-foreground)"},disabledButton:{backgroundColor:"var(--vscode-button-secondaryBackground)",color:"var(--vscode-disabledForeground)",cursor:"not-allowed",opacity:"0.6"},infoButton:{backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"1px solid var(--vscode-button-border)"},settingsButton:{backgroundColor:"var(--vscode-button-secondaryBackground)",color:"var(--vscode-button-secondaryForeground)",border:"1px solid var(--vscode-button-border)"}};function yt(){let[e,t]=b(""),[o,r]=b(""),[a,i]=b(""),[s,c]=b(""),[u,d]=b([]),[g,n]=b([]),[_,p]=b({currentBranch:"",allBranches:[],remoteBranches:[],isGitRepo:!1}),[C,E]=b(!0),[k,h]=b(!1),[v,L]=b(!1),[P,N]=b(null),[z,O]=b(!1),[q,D]=b(!1),[V,T]=b(".github/instructions"),[f,R]=b(null),[x,S]=b(!1),[M,A]=b("premerge");G(()=>{H.postMessage({type:"requestGitInfo"}),H.postMessage({type:"requestChatModels"}),H.postMessage({type:"requestSettings"});let B=W=>{let y=W.data;if(y.type==="gitInfo"){p(y.data),t(y.data.currentBranch);let oe=["dev","main","master","staging"].find(pe=>y.data.allBranches.includes(pe))||y.data.allBranches.find(pe=>pe!==y.data.currentBranch)||"";r(oe),E(!1)}else if(y.type==="chatModels"){if(n(y.data),y.error)N(y.error),O(!0);else{N(null),O(!1);let _e=y.data.find(oe=>oe.family==="gpt-4o"||oe.id==="gpt-4o")||y.data[0];_e&&c(_e.id)}L(!1)}else y.type==="showManualRefresh"?O(!0):y.type==="settings"?(D(y.data.intelligentRoutingEnabled),T(y.data.instructionFolderPath)):y.type==="branchCommits"?(console.log("Received commits for branch:",y.data.branchName),console.log("Received commits for branch:",y.data.commits),d(y.data.commits),h(!1)):y.type==="reviewCreated"?console.log("Review created:",y.data.summary):y.type==="reviewDataCleared"?console.log("Review data cleared"):y.type==="targetBranchStatus"&&(R(y.data),S(!1))};return window.addEventListener("message",B),()=>window.removeEventListener("message",B)},[]),G(()=>{e&&_.isGitRepo&&(h(!0),i(""),H.postMessage({type:"requestBranchCommits",branchName:e}))},[e,_.isGitRepo]),G(()=>{o&&_.isGitRepo?(S(!0),R(null),H.postMessage({type:"checkTargetBranch",targetBranch:o})):R(null)},[o,_.isGitRepo]);let J=["ticket-1234_update_product","ticket-4567_fix_order","feature/new-dashboard","bugfix/payment-issue","hotfix/security-patch","dev","main","staging","release/v2.0.0"],K=["dev","main","master","staging","release/v2.0.0","feature/new-dashboard","hotfix/security-patch"],U=_.isGitRepo&&_.allBranches.length>0?_.allBranches:J,Xe=_.isGitRepo&&_.allBranches.length>0?_.allBranches:K,et=()=>{console.log({currentBranch:e,baseBranch:o,selectedCommit:a,selectedModel:s}),H.postMessage({type:"createReview",data:{currentBranch:e,baseBranch:o,selectedCommit:a,selectedModel:s}})},bt=()=>{E(!0),H.postMessage({type:"refreshGit"})},tt=()=>{L(!0),N(null),O(!1),H.postMessage({type:"refreshChatModels"})},ot=()=>{H.postMessage({type:"showReviewResult"})},rt=()=>{H.postMessage({type:"openSettings",settingId:"premergeReview"})};if(C)return l("div",{style:m.container,children:l("div",{style:m.loading,children:l("div",{children:"\u{1F504} Loading git information..."})})});let nt=u.map(B=>`${B.shortHash} - ${B.message.split(`
`)[0].substring(0,50)}${B.message.length>50?"...":""}`),it=B=>{let W=u.find(y=>B.startsWith(y.shortHash));return W?W.hash:""},at=B=>{let W=u.find(y=>y.hash===B);return W?`${W.shortHash} - ${W.message.split(`
`)[0].substring(0,50)}${W.message.length>50?"...":""}`:B};return l("div",{style:m.container,children:[l("div",{style:m.header,children:l("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[l("button",{onClick:()=>A("premerge"),title:"Switch to review commit",style:{padding:"0.4rem 0.6rem",borderRadius:"4px",border:M==="premerge"?"2px solid var(--vscode-list-activeSelectionBackground)":"1px solid var(--vscode-button-border)",background:M==="premerge"?"var(--vscode-button-background)":"transparent",color:"var(--vscode-button-foreground)",cursor:"pointer"},children:"Review Commit"}),l("button",{onClick:()=>A("file"),title:"Switch to review file",style:{padding:"0.4rem 0.6rem",borderRadius:"4px",border:M==="file"?"2px solid var(--vscode-list-activeSelectionBackground)":"1px solid var(--vscode-button-border)",background:M==="file"?"var(--vscode-button-background)":"transparent",color:"var(--vscode-button-foreground)",cursor:"pointer"},children:"Review File"})]})}),M==="premerge"&&l($,{children:[!_.isGitRepo&&l("div",{style:m.warning,children:"\u26A0\uFE0F Not a Git repository. Using sample data."}),l("label",{style:m.label,children:["Current Branch ",_.isGitRepo&&`(${_.allBranches.length} branches)`]}),l(ue,{options:U,value:e,onChange:t,placeholder:"Select current branch..."}),e&&_.isGitRepo&&l("div",{style:m.commitSection,children:[l("label",{style:{...m.label,marginTop:"1rem"},children:["Select Commit (Optional)",k&&l("span",{style:m.loadingText,children:" - Loading commits..."}),!k&&u.length>0&&l("span",{style:m.commitCount,children:[" - ",u.length," commits loaded"]})]}),!k&&u.length>0&&l(ue,{options:nt,value:a?at(a):"",onChange:B=>i(it(B)),placeholder:"Select specific commit (or leave empty to use base branch)..."}),a&&l("div",{style:m.selectedCommit,children:["\u2713 Selected commit: ",a.substring(0,8),l("button",{style:m.clearButton,onClick:()=>i(""),children:"Clear"})]})]}),l("label",{style:{...m.label,marginTop:"1rem"},children:["Target Branch ",a?"(Will be ignored if commit is selected)":""," ",_.isGitRepo&&`(${_.allBranches.length} branches available)`,x&&l("span",{style:{color:"var(--vscode-descriptionForeground)",fontSize:"0.75rem",marginLeft:"0.5rem"},children:"\u{1F504} Checking..."}),f&&!x&&f.needsPull&&l("span",{style:{color:"#ff8c00",fontSize:"0.75rem",marginLeft:"0.5rem"},children:"\u26A0\uFE0F Pull recommended"})]}),l(ue,{options:Xe,value:o,onChange:r,placeholder:"Select target branch..."}),l("label",{style:{...m.label,marginTop:"1rem"},children:["AI Model for Review ",v?"(Loading...)":`(${g.length} models available)`]}),P&&l("div",{style:m.warning,children:["\u26A0\uFE0F Failed to load AI models: ",P]}),z&&l("button",{style:{...m.button,backgroundColor:"#f59e0b",marginBottom:"0.5rem"},onClick:tt,disabled:v,children:v?"Refreshing...":"\u{1F504} Manual Refresh AI Models"}),!v&&g.length>0&&l(ue,{options:g.map(B=>B.displayName),value:g.find(B=>B.id===s)?.displayName||"",onChange:B=>{let W=g.find(y=>y.displayName===B);W&&c(W.id)},placeholder:"Select AI model for code review..."}),!v&&g.length===0&&!z&&l("div",{style:m.warning,children:"\u26A0\uFE0F No AI models available. Using default GPT-4o."}),l("button",{style:m.button,onClick:et,disabled:!e||!o&&!a||!s,children:["Create Review ",a?`(from commit ${a.substring(0,8)})`:`(from ${o})`," with ",g.find(B=>B.id===s)?.name||"AI"]}),l("div",{style:m.reviewSection,children:l("div",{style:m.reviewActions,children:[l("button",{style:{...m.actionButton,...m.infoButton},onClick:ot,title:"Show review history and results",children:"\u{1F4CB} History"}),l("button",{style:{...m.actionButton,...m.settingsButton},onClick:rt,title:"Extension settings and configuration",children:"\u2699\uFE0F Settings"})]})})]}),M==="file"&&l("div",{style:{marginTop:"1rem"},children:l(xe,{vscode:H})})]})}var Qe=document.getElementById("root");Qe&&ze(l(yt,{}),Qe);})();
